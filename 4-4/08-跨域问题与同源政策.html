<!DOCTYPE html>
<html lang="zh-CN" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="https://i.328888.xyz/2023/04/14/ixDL13.jpeg"
      type="image/png" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/css/bootstrap.css"
      rel="stylesheet" />
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/js/bootstrap.bundle.js"></script>
    <title>花花</title>
  </head>

  <body>
    <button>获取手机归属地</button>
    <script>
      // 当两个页面如果具有相同的协议,相同的域名,相同的端口号,那么这两个页面就叫同源   这三个协议,域名,端口号只要有一个不相同, 就会出现跨域问题

      // http://协议的默认端口号是80
      // https://协议的默认端口号是443

      // 比如: http://www.example.com/dir/page.html
      // http://www.example.com/dir2/other.html：同源
      // http://example.com/dir/other.html：不同源（域名不同）
      // http://v2.www.example.com/dir/other.html：不同源（域名不同）
      // http://www.example.com:81/dir/other.html：不同源（端口不同）
      // https://www.example.com/dir/page.html：不同源（协议不同）

      // 同源政策的目的
      // 同源政策是为了保证用户信息的安全，防止恶意的网站窃取数据。最初的同源政策是指 A 网站在客户端设置的 Cookie，B网站是不能访问的。

      // 随着互联网的发展，同源政策也越来越严格，在不同源的情况下，其中有一项规定就是无法向非同源地址发送Ajax 请求，如果请求，浏览器就会报错。

      // 手机归属地接口:  https://api.asilu.com/phone?phone=13123456789

      var btn = document.querySelector("button");
      btn.onclick = function () {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "https://api.asilu.com/phone?phone=13123456789");
        xhr.send();
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
          }
        };
      };
    </script>
  </body>
</html>
